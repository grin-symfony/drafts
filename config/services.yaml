# This file is the entry point to configure your own services.
# Files in the packages/ subdirectory configure your dependencies.

# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices.html#use-parameters-for-application-configuration
parameters:

    ###> REGEXP ###
    app.regexp.digit:   '[0-9]'
    ###< REGEXP ###
    
    ###> SESSION ###
    app.session.max_idle_sec:   '10'
    ###< SESSION ###
    
    ###> Fixture ###
    app.fixture.users:      10
    app.fixture.product.toy:   5
    app.fixture.product.food:   5
    app.fixture.product.furniture:   5
    ###< Fixture ###

    ###> GS\Service ###
    ###< GS\Service ###

    ###> GS\WebApp ###
    ###< GS\WebApp ###

services:
    # default configuration for services in *this* file
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
    
        bind:
            ###> SERVICES ###
            $t:                 '@Symfony\Contracts\Translation\TranslatorInterface'
            $ru12Carbon:        '@app.ru_12_carbon'
            $enUtcCarbon:       '@app.en_utc_carbon'
            ###< SERVICES ###
            
            ###> gs_service ###
            $faker:             '@gs_service.faker'
            ###< gs_service ###
            
            ###> PARAMS ###
            $adminEmail:        '%env(ADMIN_EMAIL)%'
            $kernelProjectDir:  '%kernel.project_dir%'
            ###< PARAMS ###
            
    # makes classes in src/ available to be used as services
    # this creates a service per class whose id is the fully-qualified class name
    App\:
        resource: '../src/'
        exclude:
            - '../src/DependencyInjection/'
            - '../src/Entity/'
            - '../src/Kernel.php'
            
    # add more service definitions when explicit configuration is needed
    # please note that last definitions always *replace* previous ones

    ###> ROUTER ###
    App\Service\Router\AttributeRouterReader:
        class: App\Service\Router\AttributeRouterReader
        tags:
        -   routing.loader
    ###< ROUTER ###
    
    
    ###> VALUE RESOLVER ###
    ###< VALUE RESOLVER ###
    
    
    ###> SERVICES ###
    app.ru_12_carbon:
        parent: gs_service.carbon_factory_immutable
        arguments:
            $settings:
                locale: ru
                timezone: '+1200'
    
    app.en_utc_carbon:
        parent: gs_service.carbon_factory_immutable
        arguments:
            $settings:
                locale: en_US
                timezone: '+0000'
    
    ###< SERVICES ###
    
    
    ###> TAGS ###
    App\DataFixtures\UserFixtures:
        class: App\DataFixtures\UserFixtures
        tags:
        -   name: doctrine.fixture.orm
            group: user
    ###< TAGS ###
    
    
    ###< DOCTRINE ###
    
    App\Service\Doctrine\PurgerTruncateFactory:
        class:  App\Service\Doctrine\PurgerTruncateFactory
        tags:
        -   name:   'doctrine.fixtures.purger_factory'
            alias:  't'
    
    ###> DOCTRINE ###